import{O as l,S as c,C as r}from"./clashConstants-0f26f0fe.js";async function h(a,o,e=!1){const s=await l.room.getMetadata(),n=s[c.RUMBLELOG],t=new Date().toISOString();await i(a,s,o),await l.player.setMetadata(n?{[`${r.EXTENSIONID}/metadata_chatlog`]:{chatlog:a,sender:"Clash!",senderId:"Clash0000",targetId:"0000",created:t,color:"#ff9294",critical:e},[`${r.EXTENSIONID}/metadata_rolllog`]:{chatlog:a,sender:o,created:t,color:"#ff9294",critical:e}}:{[`${r.EXTENSIONID}/metadata_rolllog`]:{chatlog:a,sender:o,created:t,color:"#ff9294",critical:e}})}async function i(a,o,e){const s=o[c.DISCORDHOOK],n=o[c.DISCORDURL];if(!s||!n||n.length<10)return;const t=new XMLHttpRequest;t.open("POST",n),t.setRequestHeader("Content-type","application/json");const d={username:"Clash! : "+e,avatar_url:"https://battle-system.com/owlbear/clash-docs/logo.png",content:a};t.send(JSON.stringify(d))}export{h as S};
